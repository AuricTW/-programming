# C語言指標
*此筆記大多參考、引用自 Blogger：小狐狸事務所(超強）*

*以下的測試程式參考了下列幾本書的範例加以改編 :
C 語言初學指引第四版 (博碩, 陳錦輝)   
C 語言程式設計剖析 (全華, 簡聰海)    
C 語言從零開始 (博碩, 資訊教育研究室)    
C 語言入門 (易習, 丁國棟)    
C 語言程式設計實例入門第四版 (博碩, 高橋麻奈)    
C 語言程式設計與應用 (全華, 陳會安)*  

原版使用了使用工具包括 Windows 上的 Dev C++, 樹莓派的 gcc, 以及線上 C 語言編譯器 TutorialsPoint  
在此僅使用Dev C++進行測試
## 零. 基本介紹
C 語言雖然是高階語言, 但指標功能卻讓 C 語言也擁有低階的記憶體操作能力. 許多高階語言也有支援指標, 例如 C++, FORTRAN, PASCAL, BASIC, Perl, C# 等等, 其中 C++ 除了完整支援 C 的指標功能外, 也新增了 Smart Pointers 以提供較原始指標更安全的功能. 部分支援指標的高階語言因為安全性等原因而對指標做了限制, 例如 PASCAL 與 C#, 而 Java 則完全不支援指標

指標的主要用途如下 :   
1. 函式之間若要傳遞字串或陣列使用指標做傳址呼叫可避免資料的複製與搬移
2. 需要從函式中傳回一個以上的值時必須使用指標, 因為 return 只能傳回一個一般變數值.
3. 較複雜之資料結構需要利用指標以鏈結串列方式實作.
4. 使用指標處理字串較方便. 
  
事實上, 許多 C 語言內建函式內部都是使用指標實作的.事實上, 許多 C 語言內建函式內部都是使用指標實作的.

## 一. 指標變數的宣告與賦值
### 1. 指標是甚麼?
**指標是 C 語言中一種特別的資料型態, 專門用來儲存某個資料的記憶體位址, 其內容用來指向該資料.** 編譯器使用 CPU 的間接定址法來存取指標變數所指之記憶體


指標變數與一般變數不同, **其儲存的內容是記憶體位址, 因此占用的記憶體大小是固定的**, 即等於 CPU 的位址寬度, 例如 32 位元系統之位址匯流排寬度是 32 位元 (4 個 bytes), 可定址 2^32=4G Bytes 的 DRAM, 其指標變數長度為 4 個 Bytes; 而 64 位元系統位址匯流排 64 位元 (8 個 bytes), 定址能力為 2^64=16GB 之 DRAM,  其指標變數長度為 8 個 Bytes.

### 2. 指標變數的宣告 

**指標變數宣告方式是在變數名稱前面加 * 號 (ANSI C)** 或是在資料型態後面加 * (C++ 新增方式), 例如 :
```c
int *ptr;     //ANSI C 的宣告方式
int* ptr;     //C++ 新增的宣告方式
```
這都是宣告指向一個整數資料的指標變數 ptr. 指標變數宣告之後, 編譯器會在記憶體中指配記憶位址來儲存所指之位址. 指標變數在賦值之前其內容為記憶體之前的殘留值或隨機初始值, 此未初始化的指標變數是懸空的狀態 (dangling), 不可拿來使用, 因為它可能指向不允許存取的系統保留區或其他程序正在使用的記憶體位址, 可能導致運算結果錯誤或系統當機.

指標變數除了指向一般變數與陣列外, 也可以指向函數, 稱為函數指標, 其宣告方式例如 :
```c
int *ftpr (int x,int y);
```
這是宣告一個指向函數的指標 fptr, 詳如後述.
### 3. 指標變數的賦值 (初始化)
指標變數在使用前必須 **初始化 (賦值)**以指向某一個記憶體位址; 亦即透過指定運算將一個記憶體位址存入指標內. 指標賦值有兩種方式 :
 **使用取址運算子 & (reference operator)**
 將本身就是位址的陣列名稱或函數名稱指派給指標 
取址運算子 & 可以取得任意變數 (包含指標變數) 之記憶體位址, 例如 :
```c
int a=100;                      //宣告一般變數 a 並賦值 100
int *ptr;                          //宣告指向整數資料的指標
ptr=&a;                 //取得 a 的記憶體位址並賦值給指標 ptr
```
也可以在宣告指標的同時予以賦值, 上面的程式可改為 :
```c
int a=100;
int *ptr=&a;          //取得 a 的記憶體位址並賦值給指標 ptr
```
### 4. 陣列指標

### 5. 字串指標
### 6. 不可指派常數值給指標
### 7. 用指標當函數參數進行傳址呼叫 

## 二. 指標的長度

## 三. 指標的運算 

## 四. 指標的指標

## 五. 函數指標

## 六. 泛型指標 void

